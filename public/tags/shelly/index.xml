<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Shelly on Cello&#39;s Blog</title>
        <link>http://localhost:1313/tags/shelly/</link>
        <description>Recent content in Shelly on Cello&#39;s Blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Sun, 08 Sep 2024 00:00:00 +0000</lastBuildDate><atom:link href="http://localhost:1313/tags/shelly/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Home Assistant saves my Daughter from Nightmares</title>
        <link>http://localhost:1313/home-assistant-saves-my-daughter-from-nightmares/</link>
        <pubDate>Sun, 08 Sep 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/home-assistant-saves-my-daughter-from-nightmares/</guid>
        <description>&lt;img src="http://localhost:1313/home-assistant-saves-my-daughter-from-nightmares/cover.jpg" alt="Featured image of post Home Assistant saves my Daughter from Nightmares" /&gt;&lt;h2 id=&#34;the-problem&#34;&gt;The Problem
&lt;/h2&gt;&lt;p&gt;When our daughter is (finally) asleep, we like to watch a few more series to wind down. Currently, we are into relatively violent stuff like &lt;a class=&#34;link&#34; href=&#34;https://amzn.to/3XyVo7U&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;The Boys&lt;/a&gt;.
My wife likes to tell the anecdote that she used to crawl out of bed as a child, then secretly sit on the stairs and listen to her parents or the television.
Once, she even had nightmares because her parents were watching a horror movie and she couldn&amp;rsquo;t get the horrifying screams out of her head.&lt;/p&gt;
&lt;p&gt;But back to the present:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I don&amp;rsquo;t want my child to see exploding heads or dismembered people, let alone dream about them.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/home-assistant-saves-my-daughter-from-nightmares/homelander.gif&#34;
	width=&#34;480&#34;
	height=&#34;272&#34;
	srcset=&#34;http://localhost:1313/home-assistant-saves-my-daughter-from-nightmares/homelander_hu5033535500477252397.gif 480w, http://localhost:1313/home-assistant-saves-my-daughter-from-nightmares/homelander_hu10797557145131479730.gif 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Homelander in The Boys&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;176&#34;
		data-flex-basis=&#34;423px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;home-assistant-to-the-rescue&#34;&gt;Home Assistant to the rescue!
&lt;/h2&gt;&lt;p&gt;The first challenge was to figure out how to detect my daughter&amp;rsquo;s escape attempts in time. The solution is super simple:&lt;/p&gt;
&lt;p&gt;I installed a &lt;a class=&#34;link&#34; href=&#34;https://amzn.to/3ZfLBF6&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;cheap little door contact&lt;/a&gt; on the door to her nursery. &lt;em&gt;Installed&lt;/em&gt; is an exaggeration, these things are just stuck on.&lt;/p&gt;
&lt;p&gt;I then integrated it into Home Assistant. When integrating new sensors, it&amp;rsquo;s best to remember to tidy up right away: give them a sensible name and disable any entities you don&amp;rsquo;t need.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/home-assistant-saves-my-daughter-from-nightmares/doorsensor.jpg&#34;
	width=&#34;1309&#34;
	height=&#34;951&#34;
	srcset=&#34;http://localhost:1313/home-assistant-saves-my-daughter-from-nightmares/doorsensor_hu16344635730572754358.jpg 480w, http://localhost:1313/home-assistant-saves-my-daughter-from-nightmares/doorsensor_hu5735300221203260111.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;The door contact integrated as device in Home Assistant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;137&#34;
		data-flex-basis=&#34;330px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Now I can notice my little runaway as soon as she opens the door!&lt;/p&gt;
&lt;p&gt;The opening of the door is the trigger of my automation. When this trigger occurs, I pause the playback on my &lt;a class=&#34;link&#34; href=&#34;https://amzn.to/47gcJ99&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Fire TV Cube&lt;/a&gt; and let my &lt;a class=&#34;link&#34; href=&#34;https://amzn.to/3Xeq657&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;speakers&lt;/a&gt; make a little warning announcement.&lt;/p&gt;
&lt;p&gt;Of course, this only happens when the cinema is currently enabled and it&amp;rsquo;s our daughter&amp;rsquo;s sleeping time. Otherwise, we would hear the announcement all day long…&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;alias&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Notify at Fire TV Cube when Lia opens her door&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;description&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;trigger&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#f92672&#34;&gt;platform&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;state&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;entity_id&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      - &lt;span style=&#34;color:#ae81ff&#34;&gt;binary_sensor.liasroom_door&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;off&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;to&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;condition&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#f92672&#34;&gt;condition&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;state&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;entity_id&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;binary_sensor.lia_sleeping&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;state&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;action&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#f92672&#34;&gt;condition&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;state&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;entity_id&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;input_boolean.livingroom_cinema_enabled&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;state&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#f92672&#34;&gt;target&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;entity_id&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;tts.home_assistant_cloud&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;data&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;cache&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;message&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Lia is awake!&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;media_player_entity_id&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;media_player.wohnzimmer&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;action&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;tts.speak&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;mode&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;single&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;an-authentic-evening-on-the-couch&#34;&gt;An authentic evening on the couch
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;My wife and I are watching a gore-slasher-nightmare-horror movie&lt;/li&gt;
&lt;li&gt;Our little escapee sneaks out of her bed and opens the door.&lt;/li&gt;
&lt;li&gt;The movie pauses immediately; there are no scary noises or destructive images.&lt;/li&gt;
&lt;li&gt;The announcement confirms that our daughter seems to be awake.&lt;/li&gt;
&lt;li&gt;One of us can quickly go upstairs and put our daughter back into bed before she even has a chance to look at the screen.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion
&lt;/h2&gt;&lt;p&gt;That&amp;rsquo;s why I love Home Assistant! Such a little automation adds so much value. Sweet dreams!&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Fixing Connection Issues by Flashing ESPHome on Shellys OTA</title>
        <link>http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/</link>
        <pubDate>Wed, 04 Sep 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/</guid>
        <description>&lt;img src="http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/cover.jpg" alt="Featured image of post Fixing Connection Issues by Flashing ESPHome on Shellys OTA" /&gt;&lt;h2 id=&#34;the-problem&#34;&gt;The Problem
&lt;/h2&gt;&lt;p&gt;My house is flooded with smart relays from Shelly.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I use multiple &lt;a class=&#34;link&#34; href=&#34;https://amzn.to/3LJYm2f&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Shelly 2.5&lt;/a&gt; to control all the covers in my house&lt;/li&gt;
&lt;li&gt;I use a &lt;a class=&#34;link&#34; href=&#34;https://amzn.to/3LKJiSg&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Shelly 1PM&lt;/a&gt; to keep track of the production of my &lt;a class=&#34;link&#34; href=&#34;https://amzn.to/4cQXyV1&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;balcony power plant&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;I use many &lt;a class=&#34;link&#34; href=&#34;https://amzn.to/4e69Rhd&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Shelly 1&lt;/a&gt; to automate my light switches&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I have at least 30 smart relays around my house/garden and they work flawlessly!
But then there are one or two relays that give me headaches. Especially the one controlling the lights at my stairs. These lights are motion-controlled and I expect them to go off 3 minutes after all motion cleared. But over the last couple of weeks, this has not been happening.. This is very annoying since I had to get out of bed and switch them off manually.&lt;/p&gt;
&lt;p&gt;So I checked the Home Assistant logs regularly to find the root cause. But all I found was the generic error &lt;code&gt;DeviceConnectionError()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Then I stumbled on something interesting in the &lt;a class=&#34;link&#34; href=&#34;https://esphome.io/components/api.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ESPHome docs&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/esphome-vs-mqtt.jpg&#34;
	width=&#34;697&#34;
	height=&#34;481&#34;
	srcset=&#34;http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/esphome-vs-mqtt_hu4823773629946252659.jpg 480w, http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/esphome-vs-mqtt_hu15501111899955496945.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;ESPHome vs. MQTT&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;That’s why I decided to give ESPHome a try and looked for a way to flash ESPHome onto my Shelly. Maybe this might finally fix the connection errors! Let’s get going!&lt;/p&gt;
&lt;h2 id=&#34;creating-the-esphome-firmware&#34;&gt;Creating the ESPHome firmware
&lt;/h2&gt;&lt;p&gt;Go to ESPHome and add a new device. We do &lt;strong&gt;not&lt;/strong&gt; need to connect our Shelly to the computer since we can do everything &lt;em&gt;OTA&lt;/em&gt; (over-the-air).&lt;/p&gt;
&lt;p&gt;Click on edit and insert and tweak the following configuration to fit your needs:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Basic Config&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;esphome&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;stairs_light_shelly&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;platform&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;ESP8266&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;board&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;esp01_1m&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;wifi&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;ssid&lt;/span&gt;: !&lt;span style=&#34;color:#ae81ff&#34;&gt;secret wifi_ssid&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;password&lt;/span&gt;: !&lt;span style=&#34;color:#ae81ff&#34;&gt;secret wifi_password&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;logger&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;api&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;ota&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Device Specific Config&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;output&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#f92672&#34;&gt;platform&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;gpio&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;pin&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;GPIO4&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;id&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;relayid&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;light&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#f92672&#34;&gt;platform&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;binary&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;stairs_light&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;output&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;relayid&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;id&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;lightid&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;binary_sensor&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - &lt;span style=&#34;color:#f92672&#34;&gt;platform&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;gpio&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;pin&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;number&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;GPIO5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;stairs_light_button&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;id&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;switchid&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Hit save, click the 3 dots and select install. Choose &lt;em&gt;Manual download&lt;/em&gt; and download the firmware file in &lt;em&gt;modern format&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/ota.jpg&#34;
	width=&#34;551&#34;
	height=&#34;423&#34;
	srcset=&#34;http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/ota_hu3920761496051872125.jpg 480w, http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/ota_hu3480764484358454470.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;The wireless option for flashing the firmware&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;130&#34;
		data-flex-basis=&#34;312px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;After the file was created and downloaded, we have to zip it since the file would be too big to upload it onto the Shelly 1. I use &lt;a class=&#34;link&#34; href=&#34;https://www.7-zip.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;7-Zip&lt;/a&gt; for that. Simply right-click the file and compress it to &lt;strong&gt;gzip&lt;/strong&gt;!&lt;/p&gt;
&lt;p&gt;You should now have a Shelly 1 ESPHome firmware with extension &lt;code&gt;.bin.gz&lt;/code&gt; on your drive.&lt;/p&gt;
&lt;h2 id=&#34;flashing-tasmota-as-intermediate-firmware&#34;&gt;Flashing Tasmota as intermediate firmware
&lt;/h2&gt;&lt;p&gt;Check which IP is assigned to the Shelly you want to flash. You can see this in your &lt;a class=&#34;link&#34; href=&#34;https://amzn.to/3NNV40z&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;router&lt;/a&gt; or by clicking &lt;em&gt;Visit&lt;/em&gt; from inside Home Assistant.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/visit.jpg&#34;
	width=&#34;366&#34;
	height=&#34;332&#34;
	srcset=&#34;http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/visit_hu5054928018808083197.jpg 480w, http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/visit_hu10893991699551805014.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Link to the device&amp;rsquo;s IP in Home Assistant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;110&#34;
		data-flex-basis=&#34;264px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Check the table in &lt;a class=&#34;link&#34; href=&#34;https://github.com/alexdelprete/mgos-to-tasmota&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;this repository&lt;/a&gt;. In case of a Shelly 1 you’d have to enter the following URL into the browser:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;http://YOURIPADDRESS/ota?url=http://ota.tasmota.com/tasmota/shelly/mg2tasmota-Shelly1.zip
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;This will flash Tasmota onto your Shelly.&lt;/p&gt;
&lt;p&gt;After 2 minutes you should see a new WiFi network with a name like &lt;code&gt;tasmota-XXXXX&lt;/code&gt;. Connect to it and head over to &lt;a class=&#34;link&#34; href=&#34;http://192.168.4.1&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://192.168.4.1&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Here you can enter your WiFi credentials and hit save. Tasmota will now connect to your WiFi.&lt;/p&gt;
&lt;h2 id=&#34;flashing-our-esphome-firmware&#34;&gt;Flashing our ESPHome firmware
&lt;/h2&gt;&lt;p&gt;Go back to the IP address of your Shelly. You should see the default page of Tasmota.&lt;/p&gt;
&lt;p&gt;Now it’s important to click on Console and enter&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;SetOption78 1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The console should confirm that you enabled the option 78. This enables us to flash firmware files that are not Tasmota builds.&lt;/p&gt;
&lt;p&gt;Now head back to the main menu, select &lt;em&gt;Firmware Upgrade&lt;/em&gt; and upload the firmware file we created previously. Start the upgrade! If everything worked out you should get a success message.&lt;/p&gt;
&lt;h2 id=&#34;integration-into-home-assistant&#34;&gt;Integration into Home Assistant
&lt;/h2&gt;&lt;p&gt;After a short time (or a forced restart of Home Assistant), you will receive a notification that a new ESPHome device has been discovered — automatically!&lt;/p&gt;
&lt;p&gt;That was easy.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/stairs-in-hass.jpg&#34;
	width=&#34;1064&#34;
	height=&#34;839&#34;
	srcset=&#34;http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/stairs-in-hass_hu10169789864914084357.jpg 480w, http://localhost:1313/fixing-connection-issues-by-flashing-esphome-on-shellys-ota/stairs-in-hass_hu9288250018621894244.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;The stairs as device in Home Assistant&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;126&#34;
		data-flex-basis=&#34;304px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;summary&#34;&gt;Summary
&lt;/h2&gt;&lt;p&gt;It is possible to flash ESPHome onto many kinds of &lt;a class=&#34;link&#34; href=&#34;https://amzn.to/4dQAKG4&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Shelly smart relays&lt;/a&gt; simply over-the-air. For me this fixed the connection issues I had with a specific Shelly 1.&lt;/p&gt;
&lt;p&gt;This tutorial might help you if you are trying to solve the same problem!&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
